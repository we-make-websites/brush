/**
 * Web component: <%= name %> (<%= handle %>)
 * -----------------------------------------------------------------------------
 * <%= description %>
 *
 */
/* eslint no-unused-vars: ['error', { 'argsIgnorePattern': 'component' }] */
import './<%= handle %>.scss'

import { vueReady } from '~/core/runners'
import * as helpers from '~/helpers/web-components'

/**
 * DOM selectors.
 */
const selectors = {
  example: '[js-<%= handle %>="example"]',
}

/**
 * Create new <<%= handle %>> custom element.
 */
class <%= namePascalCase %> extends HTMLElement {
  static observedAttributes = []

  data(component) {
    return {
      selectors: {
        example: component.querySelector(selectors.example),
      },
    }
  }

  computed(component) {
    return {
      // Computed properties
      // computedProp() {
      //   return ''
      // },
    }
  }

  watch(component) {
    return {
      // Watch functions
      // watchedProp(newValue, oldValue) {
      //   // Not empty
      // },
    }
  }

  /**
   * Component before mount.
   * - Always call super first in constructor.
   */
  constructor() {
    super()
    this.$data = {}
  }

  /**
   * Component mounted.
   */
  connectedCallback() {
    this.$data = this.data(this)
    helpers.buildAttributes(this)
    helpers.buildComputed(this)
    helpers.buildWatch(this)

    this.setEventListeners()
  }

  /**
   * Component unmounted.
   */
  disconnectedCallback() {
    // Remove event listeners
  }

  /**
   * Set event listeners.
   * - Must pass 'this' as argument for function to have access to component.
   */
  setEventListeners() {
    this.$data.selectors.example.addEventListener('click', () => {
      this.handleClick(this)
    })
  }
}

/**
 * Define web component on Vue initialisation.
 */
vueReady(() => {
  if (customElements.get('<%= handle %>')) {
    return
  }

  customElements.define('<%= handle %>', <%= namePascalCase %>)
})
